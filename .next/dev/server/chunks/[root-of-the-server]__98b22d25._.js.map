{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/latinittn/Documents/theanun_liza/app/api/join/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\n\nconst guestsFilePath = path.join(process.cwd(), 'data', 'guests.json');\n\n// Interface for Guest Data\ninterface Guest {\n    name: string;\n    guests: number;\n    attending: string;\n    message: string;\n    timestamp: string;\n}\n\n// Helper to read data\nfunction readGuests(): Guest[] {\n    try {\n        if (!fs.existsSync(guestsFilePath)) {\n            // Create if it doesn't exist\n            fs.mkdirSync(path.dirname(guestsFilePath), { recursive: true });\n            fs.writeFileSync(guestsFilePath, JSON.stringify([], null, 2));\n            return [];\n        }\n        const fileContent = fs.readFileSync(guestsFilePath, 'utf-8');\n        return JSON.parse(fileContent);\n    } catch (error) {\n        console.error('Error reading guests:', error);\n        return [];\n    }\n}\n\n// Helper to write data\nfunction writeGuests(guests: Guest[]) {\n    try {\n        fs.writeFileSync(guestsFilePath, JSON.stringify(guests, null, 2));\n        return true;\n    } catch (error) {\n        console.error('Error writing guests:', error);\n        return false;\n    }\n}\n\nexport async function GET() {\n    const guests = readGuests();\n    // Return count and the list (for the admin view)\n    return NextResponse.json({\n        count: guests.length,\n        guests: guests\n    });\n}\n\nexport async function POST(request: Request) {\n    try {\n        const body = await request.json();\n\n        // Basic validation\n        if (!body || !body.name) {\n            return NextResponse.json({ error: 'Name is required' }, { status: 400 });\n        }\n\n        const newGuest: Guest = {\n            name: body.name,\n            guests: body.guests || 1,\n            attending: body.attending || 'yes',\n            message: body.message || '',\n            timestamp: new Date().toISOString()\n        };\n\n        const guests = readGuests();\n        guests.push(newGuest);\n\n        if (writeGuests(guests)) {\n            return NextResponse.json({ success: true, count: guests.length });\n        } else {\n            return NextResponse.json({ error: 'Failed to save guest' }, { status: 500 });\n        }\n    } catch (error) {\n        console.error(\"Error processing POST:\", error);\n        return NextResponse.json({ error: 'Invalid request body' }, { status: 400 });\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,iBAAiB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAWxD,sBAAsB;AACtB,SAAS;IACL,IAAI;QACA,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,iBAAiB;YAChC,6BAA6B;YAC7B,wGAAE,CAAC,SAAS,CAAC,4GAAI,CAAC,OAAO,CAAC,iBAAiB;gBAAE,WAAW;YAAK;YAC7D,wGAAE,CAAC,aAAa,CAAC,gBAAgB,KAAK,SAAS,CAAC,EAAE,EAAE,MAAM;YAC1D,OAAO,EAAE;QACb;QACA,MAAM,cAAc,wGAAE,CAAC,YAAY,CAAC,gBAAgB;QACpD,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,EAAE;IACb;AACJ;AAEA,uBAAuB;AACvB,SAAS,YAAY,MAAe;IAChC,IAAI;QACA,wGAAE,CAAC,aAAa,CAAC,gBAAgB,KAAK,SAAS,CAAC,QAAQ,MAAM;QAC9D,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;IACX;AACJ;AAEO,eAAe;IAClB,MAAM,SAAS;IACf,iDAAiD;IACjD,OAAO,6KAAY,CAAC,IAAI,CAAC;QACrB,OAAO,OAAO,MAAM;QACpB,QAAQ;IACZ;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,mBAAmB;QACnB,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE;YACrB,OAAO,6KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QAC1E;QAEA,MAAM,WAAkB;YACpB,MAAM,KAAK,IAAI;YACf,QAAQ,KAAK,MAAM,IAAI;YACvB,WAAW,KAAK,SAAS,IAAI;YAC7B,SAAS,KAAK,OAAO,IAAI;YACzB,WAAW,IAAI,OAAO,WAAW;QACrC;QAEA,MAAM,SAAS;QACf,OAAO,IAAI,CAAC;QAEZ,IAAI,YAAY,SAAS;YACrB,OAAO,6KAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,OAAO,OAAO,MAAM;YAAC;QACnE,OAAO;YACH,OAAO,6KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,6KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACJ"}}]
}